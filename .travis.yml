dist: xenial

language: go

go:
  - "1.12.x"

sudo: true

install:
  - curl -sfL https://install.goreleaser.com/github.com/golangci/golangci-lint.sh | sh -s -- -b $(go env GOPATH)/bin v1.16.0
  - sudo apt-get install cargo -y

env:
  - GO111MODULE=on

script:
  - wget -O libcuckoo.zip https://github.com/Qitmeer/cuckoo-lib/releases/download/v0.0.1/libcuckoo.zip
  - unzip libcuckoo.zip -d lib/cuckoo/target/
  - cd lib/cuckoo && cargo build --release && cd ../../ && wget -O libOpenCL.zip https://github.com/Qitmeer/OpenCL-ICD-Loader/releases/download/v0.0.1/libopencl.zip && unzip libOpenCL.zip -d lib/opencl/
  - ./ci.sh